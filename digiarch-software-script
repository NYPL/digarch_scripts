# A script for basic software installations for NYPL's Digital Archives department.
echo "Installing xcode-stuff"
xcode-select --install

# Check for Homebrew,
# Install if we don't have it
if test ! $(which brew); then
  echo "Installing homebrew..."
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

brew tap richardlehane/digipres
# Update homebrew recipes
echo "Updating homebrew..."
brew update

echo "Installing Git..."
brew install git

#To do: prompt for Git config
#echo "Git config"
#git config --global user.name "Your Name"
#git config --global user.email brad@bradparbs.com

echo "Installing other brew stuff..."
brew install tree
brew install wget
brew install trash

brew install p7zip
brew install rsync
brew install richardlehane/digipres/siegfried
brew install m5deep
brew install bagit
brew install disktype
brew install gnu-tar
brew install python@3.8

#Brew cask section
brew install --cask vlc
brew install --cask virtualbox

#other stuff- tbd
pip install bagit

# Update profile
# Test what shell is used
case $SHELL in
*/zsh) 
  profile="$HOME/.zshrc"
  ;;
*/bash)
  profile="$HOME/.bash_profile"
  ;;
*)
  exit
esac

# Configure rbenv
echo '# Configure rbenv
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"
' >> $profile

# Configure jenv
echo '# Configure jenv
export PATH="$HOME/.jenv/bin:$PATH"
eval "$(jenv init -)"
' >> $profile

source $profile

#VS Code extension
# git extensions
code --install-extension github.vscode-pull-request-github

#markdown
# linting and markup
code --install-extension DavidAnson.vscode-markdownlint
code --install-extension yzhang.markdown-all-in-one

#data formats
DotJoshJohnson.xml
mechatroner.rainbow-csv
code --install-extension DotJoshJohnson.xml
code --install-extension mechatroner.rainbow-csv

#shell
foxundermoon.shell-format
bmalehorn.shell-syntax

#git
GitHub.vscode-pull-request-github
code --install-extension foxundermoon.shell-format
code --install-extension bmalehorn.shell-syntax
code --install-extension ms-vscode-remote.remote-ssh
code --install-extension ms-vscode-remote.remote-ssh-edit

#python
ms-python.python
ms-toolsai.jupyter
code --install-extension ms-python.python
code --install-extension ms-toolsai.jupyter

#ssh stuff
ms-vscode-remote.remote-ssh
ms-vscode-remote.remote-ssh-edit
